function removeDelimiters(a){return a=a.replace(/\s/g,""),a=a.replace(/\-/g,"")}function parseNumber(a){if("string"!=typeof a)return parseFloat(a);var b=a.indexOf("."),c=a.indexOf(",");return b!=-1&&c!=-1?a=c>b?a.replace(".","").replace(",","."):a.replace(",",""):c!=-1&&(a=a.replace(",",".")),parseFloat(a)}var Validator=Class.create();Validator.prototype={initialize:function(a,b,c,d){"function"==typeof c?(this.options=$H(d),this._test=c):(this.options=$H(c),this._test=function(){return!0}),this.error=b||"Validation failed.",this.className=a},test:function(a,b){return this._test(a,b)&&this.options.all(function(c){return!Validator.methods[c.key]||Validator.methods[c.key](a,b,c.value)})}},Validator.methods={pattern:function(a,b,c){return Validation.get("IsEmpty").test(a)||c.test(a)},minLength:function(a,b,c){return a.length>=c},maxLength:function(a,b,c){return a.length<=c},min:function(a,b,c){return a>=parseFloat(c)},max:function(a,b,c){return a<=parseFloat(c)},notOneOf:function(a,b,c){return $A(c).all(function(b){return a!=b})},oneOf:function(a,b,c){return $A(c).any(function(b){return a==b})},is:function(a,b,c){return a==c},isNot:function(a,b,c){return a!=c},equalToField:function(a,b,c){return a==$F(c)},notEqualToField:function(a,b,c){return a!=$F(c)},include:function(a,b,c){return $A(c).all(function(c){return Validation.get(c).test(a,b)})}};var Validation=Class.create();Validation.defaultOptions={onSubmit:!0,stopOnFirst:!1,immediate:!1,focusOnError:!0,useTitles:!1,addClassNameToContainer:!1,containerClassName:".input-box",onFormValidate:function(a,b){},onElementValidate:function(a,b){}},Validation.prototype={initialize:function(a,b){this.form=$(a),this.form&&(this.options=Object.extend({onSubmit:Validation.defaultOptions.onSubmit,stopOnFirst:Validation.defaultOptions.stopOnFirst,immediate:Validation.defaultOptions.immediate,focusOnError:Validation.defaultOptions.focusOnError,useTitles:Validation.defaultOptions.useTitles,onFormValidate:Validation.defaultOptions.onFormValidate,onElementValidate:Validation.defaultOptions.onElementValidate},b||{}),this.options.onSubmit&&Event.observe(this.form,"submit",this.onSubmit.bind(this),!1),this.options.immediate&&Form.getElements(this.form).each(function(a){"select"==a.tagName.toLowerCase()&&Event.observe(a,"blur",this.onChange.bindAsEventListener(this)),"radio"==a.type.toLowerCase()||"checkbox"==a.type.toLowerCase()?Event.observe(a,"click",this.onChange.bindAsEventListener(this)):Event.observe(a,"change",this.onChange.bindAsEventListener(this))},this))},onChange:function(a){Validation.isOnChange=!0,Validation.validate(Event.element(a),{useTitle:this.options.useTitles,onElementValidate:this.options.onElementValidate}),Validation.isOnChange=!1},onSubmit:function(a){this.validate()||Event.stop(a)},validate:function(){var a=!1,b=this.options.useTitles,c=this.options.onElementValidate;try{a=this.options.stopOnFirst?Form.getElements(this.form).all(function(a){return!(!a.hasClassName("local-validation")||this.isElementInForm(a,this.form))||Validation.validate(a,{useTitle:b,onElementValidate:c})},this):Form.getElements(this.form).collect(function(a){return!(!a.hasClassName("local-validation")||this.isElementInForm(a,this.form))||Validation.validate(a,{useTitle:b,onElementValidate:c})},this).all()}catch(a){}if(!a&&this.options.focusOnError)try{Form.getElements(this.form).findAll(function(a){return $(a).hasClassName("validation-failed")}).first().focus()}catch(a){}return this.options.onFormValidate(a,this.form),a},reset:function(){Form.getElements(this.form).each(Validation.reset)},isElementInForm:function(a,b){var c=a.up("form");return c==b}},Object.extend(Validation,{validate:function(a,b){b=Object.extend({useTitle:!1,onElementValidate:function(a,b){}},b||{}),a=$(a);var c=$w(a.className);return result=c.all(function(c){var d=Validation.test(c,a,b.useTitle);return b.onElementValidate(d,a),d})},insertAdvice:function(a,b){var c=$(a).up(".field-row");if(c)Element.insert(c,{after:b});else if(a.up("td.value"))a.up("td.value").insert({bottom:b});else if(a.advaiceContainer&&$(a.advaiceContainer))$(a.advaiceContainer).update(b);else switch(a.type.toLowerCase()){case"checkbox":case"radio":var d=a.parentNode;d?Element.insert(d,{bottom:b}):Element.insert(a,{after:b});break;default:Element.insert(a,{after:b})}},showAdvice:function(a,b,c){a.advices?a.advices.each(function(c){b&&c.value.id==b.id||this.hideAdvice(a,c.value)}.bind(this)):a.advices=new Hash,a.advices.set(c,b),"undefined"==typeof Effect?b.style.display="block":b._adviceAbsolutize?(Position.absolutize(b),b.show(),b.setStyle({top:b._adviceTop,left:b._adviceLeft,width:b._adviceWidth,"z-index":1e3}),b.addClassName("advice-absolute")):new Effect.Appear(b,{duration:1})},hideAdvice:function(a,b){null!=b&&new Effect.Fade(b,{duration:1,afterFinishInternal:function(){b.hide()}})},updateCallback:function(elm,status){"undefined"!=typeof elm.callbackFunction&&eval(elm.callbackFunction+"('"+elm.id+"','"+status+"')")},ajaxError:function(a,b){var c="validate-ajax",d=Validation.getAdvice(c,a);if(null==d&&(d=this.createAdvice(c,a,!1,b)),this.showAdvice(a,d,"validate-ajax"),this.updateCallback(a,"failed"),a.addClassName("validation-failed"),a.addClassName("validate-ajax"),Validation.defaultOptions.addClassNameToContainer&&""!=Validation.defaultOptions.containerClassName){var e=a.up(Validation.defaultOptions.containerClassName);e&&this.allowContainerClassName(a)&&(e.removeClassName("validation-passed"),e.addClassName("validation-error"))}},allowContainerClassName:function(a){return"radio"!=a.type&&"checkbox"!=a.type||a.hasClassName("change-container-classname")},test:function(a,b,c){var d=Validation.get(a),e="__advice"+a.camelize();try{if(Validation.isVisible(b)&&!d.test($F(b),b)){var f=Validation.getAdvice(a,b);if(null==f&&(f=this.createAdvice(a,b,c)),this.showAdvice(b,f,a),this.updateCallback(b,"failed"),b[e]=1,b.advaiceContainer||(b.removeClassName("validation-passed"),b.addClassName("validation-failed")),Validation.defaultOptions.addClassNameToContainer&&""!=Validation.defaultOptions.containerClassName){var g=b.up(Validation.defaultOptions.containerClassName);g&&this.allowContainerClassName(b)&&(g.removeClassName("validation-passed"),g.addClassName("validation-error"))}return!1}var f=Validation.getAdvice(a,b);if(this.hideAdvice(b,f),this.updateCallback(b,"passed"),b[e]="",b.removeClassName("validation-failed"),b.addClassName("validation-passed"),Validation.defaultOptions.addClassNameToContainer&&""!=Validation.defaultOptions.containerClassName){var g=b.up(Validation.defaultOptions.containerClassName);g&&!g.down(".validation-failed")&&this.allowContainerClassName(b)&&(Validation.get("IsEmpty").test(b.value)&&this.isVisible(b)?g.removeClassName("validation-passed"):g.addClassName("validation-passed"),g.removeClassName("validation-error"))}return!0}catch(a){throw a}},isVisible:function(a){for(;"BODY"!=a.tagName;){if(!$(a).visible())return!1;a=a.parentNode}return!0},getAdvice:function(a,b){return $("advice-"+a+"-"+Validation.getElmID(b))||$("advice-"+Validation.getElmID(b))},createAdvice:function(a,b,c,d){var e=Validation.get(a),f=c&&b&&b.title?b.title:e.error;d&&(f=d);try{Translator&&(f=Translator.translate(f))}catch(a){}if(advice='<div class="validation-advice" id="advice-'+a+"-"+Validation.getElmID(b)+'" style="display:none">'+f+"</div>",Validation.insertAdvice(b,advice),advice=Validation.getAdvice(a,b),$(b).hasClassName("absolute-advice")){var g=$(b).getDimensions(),h=Position.cumulativeOffset(b);advice._adviceTop=h[1]+g.height+"px",advice._adviceLeft=h[0]+"px",advice._adviceWidth=g.width+"px",advice._adviceAbsolutize=!0}return advice},getElmID:function(a){return a.id?a.id:a.name},reset:function(a){a=$(a);var b=$w(a.className);b.each(function(b){var c="__advice"+b.camelize();if(a[c]){var d=Validation.getAdvice(b,a);d&&d.hide(),a[c]=""}if(a.removeClassName("validation-failed"),a.removeClassName("validation-passed"),Validation.defaultOptions.addClassNameToContainer&&""!=Validation.defaultOptions.containerClassName){var e=a.up(Validation.defaultOptions.containerClassName);e&&(e.removeClassName("validation-passed"),e.removeClassName("validation-error"))}})},add:function(a,b,c,d){var e={};e[a]=new Validator(a,b,c,d),Object.extend(Validation.methods,e)},addAllThese:function(a){var b={};$A(a).each(function(a){b[a[0]]=new Validator(a[0],a[1],a[2],a.length>3?a[3]:{})}),Object.extend(Validation.methods,b)},get:function(a){return Validation.methods[a]?Validation.methods[a]:Validation.methods._LikeNoIDIEverSaw_},methods:{_LikeNoIDIEverSaw_:new Validator("_LikeNoIDIEverSaw_","",{})}}),Validation.add("IsEmpty","",function(a){return""==a||null==a||0==a.length||/^\s+$/.test(a)}),Validation.addAllThese([["validate-no-html-tags","HTML tags are not allowed",function(a){return!/<(\/)?\w+/.test(a)}],["validate-select","Please select an option.",function(a){return"none"!=a&&null!=a&&0!=a.length}],["required-entry","This is a required field.",function(a){return!Validation.get("IsEmpty").test(a)}],["validate-number","Please enter a valid number in this field.",function(a){return Validation.get("IsEmpty").test(a)||!isNaN(parseNumber(a))&&/^\s*-?\d*(\.\d*)?\s*$/.test(a)}],["validate-number-range","The value is not within the specified range.",function(a,b){if(Validation.get("IsEmpty").test(a))return!0;var c=parseNumber(a);if(isNaN(c))return!1;var d=/^number-range-(-?[\d.,]+)?-(-?[\d.,]+)?$/,e=!0;return $w(b.className).each(function(a){var b=d.exec(a);b&&(e=e&&(null==b[1]||""==b[1]||c>=parseNumber(b[1]))&&(null==b[2]||""==b[2]||c<=parseNumber(b[2])))}),e}],["validate-digits","Please use numbers only in this field. Please avoid spaces or other characters such as dots or commas.",function(a){return Validation.get("IsEmpty").test(a)||!/[^\d]/.test(a)}],["validate-digits-range","The value is not within the specified range.",function(a,b){if(Validation.get("IsEmpty").test(a))return!0;var c=parseNumber(a);if(isNaN(c))return!1;var d=/^digits-range-(-?\d+)?-(-?\d+)?$/,e=!0;return $w(b.className).each(function(a){var b=d.exec(a);b&&(e=e&&(null==b[1]||""==b[1]||c>=parseNumber(b[1]))&&(null==b[2]||""==b[2]||c<=parseNumber(b[2])))}),e}],["validate-alpha","Please use letters only (a-z or A-Z) in this field.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-zA-Z]+$/.test(a)}],["validate-code","Please use only letters (a-z), numbers (0-9) or underscore(_) in this field, first character should be a letter.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-z]+[a-z0-9_]+$/.test(a)}],["validate-alphanum","Please use only letters (a-z or A-Z) or numbers (0-9) only in this field. No spaces or other characters are allowed.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-zA-Z0-9]+$/.test(a)}],["validate-alphanum-with-spaces","Please use only letters (a-z or A-Z), numbers (0-9) or spaces only in this field.",function(a){return Validation.get("IsEmpty").test(a)||/^[a-zA-Z0-9 ]+$/.test(a)}],["validate-street","Please use only letters (a-z or A-Z) or numbers (0-9) or spaces and # only in this field.",function(a){return Validation.get("IsEmpty").test(a)||/^[ \w]{3,}([A-Za-z]\.)?([ \w]*\#\d+)?(\r\n| )[ \w]{3,}/.test(a)}],["validate-phoneStrict","Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.",function(a){return Validation.get("IsEmpty").test(a)||/^(\()?\d{3}(\))?(-|\s)?\d{3}(-|\s)\d{4}$/.test(a)}],["validate-phoneLax","Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.",function(a){return Validation.get("IsEmpty").test(a)||/^((\d[-. ]?)?((\(\d{3}\))|\d{3}))?[-. ]?\d{3}[-. ]?\d{4}$/.test(a)}],["validate-fax","Please enter a valid fax number. For example (123) 456-7890 or 123-456-7890.",function(a){return Validation.get("IsEmpty").test(a)||/^(\()?\d{3}(\))?(-|\s)?\d{3}(-|\s)\d{4}$/.test(a)}],["validate-date","Please enter a valid date.",function(a){var b=new Date(a);return Validation.get("IsEmpty").test(a)||!isNaN(b)}],["validate-date-range","The From Date value should be less than or equal to the To Date value.",function(a,b){var c=/\bdate-range-(\w+)-(\w+)\b/.exec(b.className);if(!c||"to"==c[2]||Validation.get("IsEmpty").test(a))return!0;var d=(new Date).getFullYear()+"",e=function(a){return a=a.split(/[.\/]/),a[2]&&a[2].length<4&&(a[2]=d.substr(0,a[2].length)+a[2]),new Date(a.join("/")).getTime()},f=Element.select(b.form,".validate-date-range.date-range-"+c[1]+"-to");return!f.length||Validation.get("IsEmpty").test(f[0].value)||e(a)<=e(f[0].value)}],["validate-email","Please enter a valid email address. For example johndoe@domain.com.",function(a){return Validation.get("IsEmpty").test(a)||/^([a-z0-9,!\#\$%&'\*\+\/=\?\^_`\{\|\}~-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z0-9,!\#\$%&'\*\+\/=\?\^_`\{\|\}~-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*@([a-z0-9-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z0-9-]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*\.(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]){2,})$/i.test(a)}],["validate-emailSender","Please use only visible characters and spaces.",function(a){return Validation.get("IsEmpty").test(a)||/^[\S ]+$/.test(a)}],["validate-password","Please enter 6 or more characters. Leading or trailing spaces will be ignored.",function(a){var b=a.strip();return!(b.length>0&&b.length<6)}],["validate-admin-password","Please enter 7 or more characters. Password should contain both numeric and alphabetic characters.",function(a){var b=a.strip();return 0==b.length||!(!/[a-z]/i.test(a)||!/[0-9]/.test(a))&&!(b.length<7)}],["validate-cpassword","Please make sure your passwords match.",function(a){var b=$("confirmation")?$("confirmation"):$$(".validate-cpassword")[0],c=!1;$("password")&&(c=$("password"));for(var d=$$(".validate-password"),e=0;e<d.size();e++){var f=d[e];f.up("form").id==b.up("form").id&&(c=f)}return $$(".validate-admin-password").size()&&(c=$$(".validate-admin-password")[0]),c.value==b.value}],["validate-both-passwords","Please make sure your passwords match.",function(a,b){var c=$(b.form["password"==b.name?"confirmation":"password"]),d=b.value==c.value;return d&&c.hasClassName("validation-failed")&&Validation.test(this.className,c),""==c.value||d}],["validate-url","Please enter a valid URL. Protocol is required (http://, https:// or ftp://)",function(a){return a=(a||"").replace(/^\s+/,"").replace(/\s+$/,""),Validation.get("IsEmpty").test(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)}],["validate-clean-url","Please enter a valid URL. For example http://www.example.com or www.example.com",function(a){return Validation.get("IsEmpty").test(a)||/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+.(com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\d+))?\/?/i.test(a)||/^(www)((\.[A-Z0-9][A-Z0-9_-]*)+.(com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\d+))?\/?/i.test(a)}],["validate-identifier",'Please enter a valid URL Key. For example "example-page", "example-page.html" or "anotherlevel/example-page".',function(a){return Validation.get("IsEmpty").test(a)||/^[a-z0-9][a-z0-9_\/-]+(\.[a-z0-9_-]+)?$/.test(a)}],["validate-xml-identifier","Please enter a valid XML-identifier. For example something_1, block5, id-4.",function(a){return Validation.get("IsEmpty").test(a)||/^[A-Z][A-Z0-9_\/-]*$/i.test(a)}],["validate-ssn","Please enter a valid social security number. For example 123-45-6789.",function(a){return Validation.get("IsEmpty").test(a)||/^\d{3}-?\d{2}-?\d{4}$/.test(a)}],["validate-zip","Please enter a valid zip code. For example 90602 or 90602-1234.",function(a){return Validation.get("IsEmpty").test(a)||/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(a)}],["validate-zip-international","Please enter a valid zip code.",function(a){return!0}],["validate-date-au","Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.",function(a){if(Validation.get("IsEmpty").test(a))return!0;var b=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!b.test(a))return!1;var c=new Date(a.replace(b,"$2/$1/$3"));return parseInt(RegExp.$2,10)==1+c.getMonth()&&parseInt(RegExp.$1,10)==c.getDate()&&parseInt(RegExp.$3,10)==c.getFullYear()}],["validate-currency-dollar","Please enter a valid $ amount. For example $100.00.",function(a){return Validation.get("IsEmpty").test(a)||/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(a)}],["validate-one-required","Please select one of the above options.",function(a,b){var c=b.parentNode,d=c.getElementsByTagName("INPUT");return $A(d).any(function(a){return $F(a)})}],["validate-one-required-by-name","Please select one of the options.",function(a,b){for(var c=$$('input[name="'+b.name.replace(/([\\"])/g,"\\$1")+'"]'),d=1,e=0;e<c.length;e++)"checkbox"!=c[e].type&&"radio"!=c[e].type||1!=c[e].checked||(d=0),!Validation.isOnChange||"checkbox"!=c[e].type&&"radio"!=c[e].type||Validation.reset(c[e]);return 0==d}],["validate-not-negative-number","Please enter a number 0 or greater in this field.",function(a){return!!Validation.get("IsEmpty").test(a)||(a=parseNumber(a),!isNaN(a)&&a>=0)}],["validate-zero-or-greater","Please enter a number 0 or greater in this field.",function(a){return Validation.get("validate-not-negative-number").test(a)}],["validate-greater-than-zero","Please enter a number greater than 0 in this field.",function(a){return!!Validation.get("IsEmpty").test(a)||(a=parseNumber(a),!isNaN(a)&&a>0)}],["validate-state","Please select State/Province.",function(a){return 0!=a||""==a}],["validate-new-password","Please enter 6 or more characters. Leading or trailing spaces will be ignored.",function(a){return!!Validation.get("validate-password").test(a)&&(!Validation.get("IsEmpty").test(a)||""==a)}],["validate-cc-number","Please enter a valid credit card number.",function(a,b){var c=$(b.id.substr(0,b.id.indexOf("_cc_number"))+"_cc_type");return c&&"undefined"!=typeof Validation.creditCartTypes.get(c.value)&&0==Validation.creditCartTypes.get(c.value)[2]?!(Validation.get("IsEmpty").test(a)||!Validation.get("validate-digits").test(a)):validateCreditCard(a)}],["validate-cc-type","Credit card number does not match credit card type.",function(a,b){b.value=removeDelimiters(b.value),a=removeDelimiters(a);var c=$(b.id.substr(0,b.id.indexOf("_cc_number"))+"_cc_type");if(!c)return!0;var d=c.value;if("undefined"==typeof Validation.creditCartTypes.get(d))return!1;if(0==Validation.creditCartTypes.get(d)[0])return!0;var e=!1;return Validation.creditCartTypes.each(function(b){if(b.key==d)throw b.value[0]&&!a.match(b.value[0])&&(e=!0),$break}),!e&&(c.hasClassName("validation-failed")&&Validation.isOnChange&&Validation.validate(c),!0)}],["validate-cc-type-select","Card type does not match credit card number.",function(a,b){var c=$(b.id.substr(0,b.id.indexOf("_cc_type"))+"_cc_number");return!(!Validation.isOnChange||!Validation.get("IsEmpty").test(c.value))||(Validation.get("validate-cc-type").test(c.value,c)&&Validation.validate(c),Validation.get("validate-cc-type").test(c.value,c))}],["validate-cc-exp","Incorrect credit card expiration date.",function(a,b){var c=a,d=$(b.id.substr(0,b.id.indexOf("_expiration"))+"_expiration_yr").value,e=new Date,f=e.getMonth()+1,g=e.getFullYear();return!(c<f&&d==g)}],["validate-cc-cvn","Please enter a valid credit card verification number.",function(a,b){var c=$(b.id.substr(0,b.id.indexOf("_cc_cid"))+"_cc_type");if(!c)return!0;var d=c.value;if("undefined"==typeof Validation.creditCartTypes.get(d))return!1;var e=Validation.creditCartTypes.get(d)[1];return!!a.match(e)}],["validate-ajax","",function(a,b){return!0}],["validate-data","Please use only letters (a-z or A-Z), numbers (0-9) or underscore(_) in this field, first character should be a letter.",function(a){return""==a||!a||/^[A-Za-z]+[A-Za-z0-9_]+$/.test(a)}],["validate-css-length","Please input a valid CSS-length. For example 100px or 77pt or 20em or .5ex or 50%.",function(a){return""==a||!a||/^[0-9\.]+(px|pt|em|ex|%)?$/.test(a)&&!/\..*\./.test(a)&&!/\.$/.test(a)}],["validate-length","Text length does not satisfy specified text range.",function(a,b){var c=new RegExp(/^maximum-length-[0-9]+$/),d=new RegExp(/^minimum-length-[0-9]+$/),e=!0;return $w(b.className).each(function(b,f){if(b.match(c)&&e){var g=b.split("-")[2];e=a.length<=g}if(b.match(d)&&e&&!Validation.get("IsEmpty").test(a)){var g=b.split("-")[2];e=a.length>=g}}),e}],["validate-percents","Please enter a number lower than 100.",{max:100}],["required-file","Please select a file",function(a,b){var c=!Validation.get("IsEmpty").test(a);return c===!1&&(ovId=b.id+"_value",$(ovId)&&(c=!Validation.get("IsEmpty").test($(ovId).value))),c}],["validate-cc-ukss","Please enter issue number or start date for switch/solo card type.",function(a,b){var c;c=b.id.match(/(.)+_cc_issue$/)?b.id.indexOf("_cc_issue"):b.id.match(/(.)+_start_month$/)?b.id.indexOf("_start_month"):b.id.indexOf("_start_year");var d=b.id.substr(0,c),e=$(d+"_cc_type");if(!e)return!0;var f=e.value;if(["SS","SM","SO"].indexOf(f)==-1)return!0;$(d+"_cc_issue").advaiceContainer=$(d+"_start_month").advaiceContainer=$(d+"_start_year").advaiceContainer=$(d+"_cc_type_ss_div").down("ul li.adv-container");var g=$(d+"_cc_issue").value,h=$(d+"_start_month").value,i=$(d+"_start_year").value,j=!(!h||!i);return!(!j&&!g)}]]),Validation.creditCartTypes=$H({SO:[new RegExp("^(6334[5-9]([0-9]{11}|[0-9]{13,14}))|(6767([0-9]{12}|[0-9]{14,15}))$"),new RegExp("^([0-9]{3}|[0-9]{4})?$"),!0],VI:[new RegExp("^4[0-9]{12}([0-9]{3})?$"),new RegExp("^[0-9]{3}$"),!0],MC:[new RegExp("^5[1-5][0-9]{14}$"),new RegExp("^[0-9]{3}$"),!0],AE:[new RegExp("^3[47][0-9]{13}$"),new RegExp("^[0-9]{4}$"),!0],DI:[new RegExp("^(30[0-5][0-9]{13}|3095[0-9]{12}|35(2[8-9][0-9]{12}|[3-8][0-9]{13})|36[0-9]{12}|3[8-9][0-9]{14}|6011(0[0-9]{11}|[2-4][0-9]{11}|74[0-9]{10}|7[7-9][0-9]{10}|8[6-9][0-9]{10}|9[0-9]{11})|62(2(12[6-9][0-9]{10}|1[3-9][0-9]{11}|[2-8][0-9]{12}|9[0-1][0-9]{11}|92[0-5][0-9]{10})|[4-6][0-9]{13}|8[2-8][0-9]{12})|6(4[4-9][0-9]{13}|5[0-9]{14}))$"),new RegExp("^[0-9]{3}$"),!0],JCB:[new RegExp("^(30[0-5][0-9]{13}|3095[0-9]{12}|35(2[8-9][0-9]{12}|[3-8][0-9]{13})|36[0-9]{12}|3[8-9][0-9]{14}|6011(0[0-9]{11}|[2-4][0-9]{11}|74[0-9]{10}|7[7-9][0-9]{10}|8[6-9][0-9]{10}|9[0-9]{11})|62(2(12[6-9][0-9]{10}|1[3-9][0-9]{11}|[2-8][0-9]{12}|9[0-1][0-9]{11}|92[0-5][0-9]{10})|[4-6][0-9]{13}|8[2-8][0-9]{12})|6(4[4-9][0-9]{13}|5[0-9]{14}))$"),new RegExp("^[0-9]{3,4}$"),!0],DICL:[new RegExp("^(30[0-5][0-9]{13}|3095[0-9]{12}|35(2[8-9][0-9]{12}|[3-8][0-9]{13})|36[0-9]{12}|3[8-9][0-9]{14}|6011(0[0-9]{11}|[2-4][0-9]{11}|74[0-9]{10}|7[7-9][0-9]{10}|8[6-9][0-9]{10}|9[0-9]{11})|62(2(12[6-9][0-9]{10}|1[3-9][0-9]{11}|[2-8][0-9]{12}|9[0-1][0-9]{11}|92[0-5][0-9]{10})|[4-6][0-9]{13}|8[2-8][0-9]{12})|6(4[4-9][0-9]{13}|5[0-9]{14}))$"),new RegExp("^[0-9]{3}$"),!0],SM:[new RegExp("(^(5[0678])[0-9]{11,18}$)|(^(6[^05])[0-9]{11,18}$)|(^(601)[^1][0-9]{9,16}$)|(^(6011)[0-9]{9,11}$)|(^(6011)[0-9]{13,16}$)|(^(65)[0-9]{11,13}$)|(^(65)[0-9]{15,18}$)|(^(49030)[2-9]([0-9]{10}$|[0-9]{12,13}$))|(^(49033)[5-9]([0-9]{10}$|[0-9]{12,13}$))|(^(49110)[1-2]([0-9]{10}$|[0-9]{12,13}$))|(^(49117)[4-9]([0-9]{10}$|[0-9]{12,13}$))|(^(49118)[0-2]([0-9]{10}$|[0-9]{12,13}$))|(^(4936)([0-9]{12}$|[0-9]{14,15}$))"),new RegExp("^([0-9]{3}|[0-9]{4})?$"),!0],OT:[!1,new RegExp("^([0-9]{3}|[0-9]{4})?$"),!1]});